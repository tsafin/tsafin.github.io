---
layout: post
title: Подсветка синтаксиса во встроенном Си++ коде
date: '2014-11-24T16:31:00.000+03:00'
author: Timur Safin
tags: 
modified_time: '2014-11-24T16:31:12.727+03:00'
thumbnail: http://3.bp.blogspot.com/-gskSZj86-cc/U0VM4y3vZrI/AAAAAAAAQpU/3_dqvbdfD10/s72-c/quotes.png
blogger_id: tag:blogger.com,1999:blog-1111089994103028505.post-579408295153918398
blogger_orig_url: http://tsafin.blogspot.com/2014/11/blog-post.html
---

<p>Проверка работы подсветки синтаксиса в С++ режиме (код из Mozilla исходников, файл X86Assembler.h)</p> <pre class="brush: cpp"><br />#if ENABLE_ASSEMBLER &amp;&amp; (WTF_CPU_X86 || WTF_CPU_X86_64)<br /><br />#include &quot;assembler/assembler/AssemblerBuffer.h&quot;<br />#include &quot;assembler/wtf/Assertions.h&quot;<br />#include &quot;js/Vector.h&quot;<br /><br />namespace JSC {<br /><br />inline bool CAN_SIGN_EXTEND_8_32(int32_t value) { return value == (int32_t)(signed char)value; }<br />inline bool CAN_ZERO_EXTEND_8_32(int32_t value) { return value == (int32_t)(unsigned char)value; }<br />inline bool CAN_ZERO_EXTEND_8H_32(int32_t value) { return value == (value &amp; 0xff00); }<br />inline bool CAN_ZERO_EXTEND_32_64(int32_t value) { return value &gt;= 0; }<br /><br />namespace X86Registers {<br />    typedef enum {<br />        eax,<br />        ecx,<br />        edx,<br />        ebx,<br />        esp,<br />        ebp,<br />        esi,<br />        edi<br /><br />#if WTF_CPU_X86_64<br />       ,r8,<br />        r9,<br />        r10,<br />        r11,<br />        r12,<br />        r13,<br />        r14,<br />        r15<br />#endif<br />        ,invalid_reg<br />    } RegisterID;<br /><br />...<br />    static const char* nameFPReg(XMMRegisterID fpreg)<br />    {<br />        static const char* const xmmnames[16]<br />          = { &quot;%xmm0&quot;, &quot;%xmm1&quot;, &quot;%xmm2&quot;, &quot;%xmm3&quot;,<br />              &quot;%xmm4&quot;, &quot;%xmm5&quot;, &quot;%xmm6&quot;, &quot;%xmm7&quot;,<br />              &quot;%xmm8&quot;, &quot;%xmm9&quot;, &quot;%xmm10&quot;, &quot;%xmm11&quot;,<br />              &quot;%xmm12&quot;, &quot;%xmm13&quot;, &quot;%xmm14&quot;, &quot;%xmm15&quot; };<br />        int off = (XMMRegisterID)fpreg - (XMMRegisterID)xmm0;<br />        return (off &lt; 0 || off &gt; 15) ? &quot;%xmm?&quot; : xmmnames[off];<br />    }<br /><br />    static const char* nameIReg(int szB, RegisterID reg)<br />    {<br />        static const char* const r64names[16]<br />          = { &quot;%rax&quot;, &quot;%rcx&quot;, &quot;%rdx&quot;, &quot;%rbx&quot;, &quot;%rsp&quot;, &quot;%rbp&quot;, &quot;%rsi&quot;, &quot;%rdi&quot;,<br />              &quot;%r8&quot;, &quot;%r9&quot;, &quot;%r10&quot;, &quot;%r11&quot;, &quot;%r12&quot;, &quot;%r13&quot;, &quot;%r14&quot;, &quot;%r15&quot; };<br />        static const char* const r32names[16]<br />          = { &quot;%eax&quot;, &quot;%ecx&quot;, &quot;%edx&quot;, &quot;%ebx&quot;, &quot;%esp&quot;, &quot;%ebp&quot;, &quot;%esi&quot;, &quot;%edi&quot;,<br />              &quot;%r8d&quot;, &quot;%r9d&quot;, &quot;%r10d&quot;, &quot;%r11d&quot;, &quot;%r12d&quot;, &quot;%r13d&quot;, &quot;%r14d&quot;, &quot;%r15d&quot; };<br />...<br />        int          off = (RegisterID)reg - (RegisterID)eax;<br />        const char* const* tab = r64names;<br />        switch (szB) {<br />            case 1: tab = r8names; break;<br />            case 2: tab = r16names; break;<br />            case 4: tab = r32names; break;<br />        }<br />        return (off &lt; 0 || off &gt; 15) ? &quot;%r???&quot; : tab[off];<br />    }<br /></pre> <p>Для htmlencode использовался <a href="http://www.string-functions.com/htmlencode.aspx">http://www.string-functions.com/htmlencode.aspx</a> хотя разницы не было. Похоже что highlighter игнорирует все пробелы в коде если использовать pre вставку</p> <a href="http://3.bp.blogspot.com/-gskSZj86-cc/U0VM4y3vZrI/AAAAAAAAQpU/3_dqvbdfD10/s1600/quotes.png" imageanchor="1" ><img border="0" src="http://3.bp.blogspot.com/-gskSZj86-cc/U0VM4y3vZrI/AAAAAAAAQpU/3_dqvbdfD10/s320/quotes.png" /></a> <blockquote>Проверка отступов с картинкой </blockquote>